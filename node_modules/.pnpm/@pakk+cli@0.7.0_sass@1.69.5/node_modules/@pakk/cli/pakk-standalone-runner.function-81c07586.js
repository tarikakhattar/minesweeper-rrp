import { asyncFilterMap } from "@alexaegis/common";
import { writeJson } from "@alexaegis/fs";
import { DEFAULT_EXPORT_FORMATS, Pakk } from "@pakk/core";
const normalizePakkStandaloneOptions = (options) => {
  return {
    formats: options?.formats ?? DEFAULT_EXPORT_FORMATS
  };
};
const pakkStandaloneRunner = async (rawOptions) => {
  const pakkStandaloneOptions = normalizePakkStandaloneOptions(rawOptions);
  const pakk = await Pakk.withContext(pakkStandaloneOptions, rawOptions);
  await pakk.examinePackage();
  await asyncFilterMap(pakk.getTargetPackageJsonKinds(), async (packageJsonTarget) => {
    const { updatedPackageJson, path } = await pakk.createUpdatedPackageJson(packageJsonTarget);
    await writeJson(updatedPackageJson, path, pakk.options);
  });
};
export {
  pakkStandaloneRunner as p
};
//# sourceMappingURL=pakk-standalone-runner.function-81c07586.js.map
