"use strict";
const common = require("@alexaegis/common");
const fs = require("@alexaegis/fs");
const workspaceTools = require("@alexaegis/workspace-tools");
const node_path = require("node:path");
const sortJsonFile = async (path, options) => {
  const content = await fs.readJson(path);
  if (content) {
    let sortPreferences = options.sortingPreference;
    if (node_path.basename(path) === "package.json") {
      sortPreferences = workspaceTools.normalizeSortingPreferenceForPackageJson(sortPreferences);
    }
    const sortedContent = common.sortObject(content, sortPreferences);
    const alreadySorted = JSON.stringify(content) === JSON.stringify(sortedContent);
    if (!options.dry && !options.check) {
      await fs.writeJson(sortedContent, path, options);
    } else if (options.dry && !options.check) {
      options.logger?.info(`sorting ${path}`);
    } else if (options.check && !alreadySorted) {
      options.logger?.info(`not sorted: ${path}`);
    }
    return alreadySorted;
  } else {
    return false;
  }
};
exports.sortJsonFile = sortJsonFile;
//# sourceMappingURL=sort-json-file.function-4ea2f42a.cjs.map
