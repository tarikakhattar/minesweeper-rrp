{"version":3,"file":"pakk-standalone-runner.function-81c07586.js","sources":["../src/internal/pakk-standalone-runner.function.options.ts","../src/internal/pakk-standalone-runner.function.ts"],"sourcesContent":["import type { Defined } from '@alexaegis/common';\nimport { DEFAULT_EXPORT_FORMATS } from '@pakk/core';\nimport type { LibraryFormats } from 'vite';\n\nexport interface PakkStandaloneOptions {\n\t/**\n\t * @defaultValue ['es', 'cjs']\n\t */\n\tformats?: LibraryFormats[] | undefined;\n}\n\nexport type NormalizedPakkStandaloneOptions = Defined<PakkStandaloneOptions>;\n\nexport const normalizePakkStandaloneOptions = (\n\toptions?: PakkStandaloneOptions,\n): NormalizedPakkStandaloneOptions => {\n\treturn {\n\t\tformats: options?.formats ?? DEFAULT_EXPORT_FORMATS,\n\t};\n};\n","import { asyncFilterMap } from '@alexaegis/common';\nimport { writeJson } from '@alexaegis/fs';\n\nimport { Pakk, type PakkOptions } from '@pakk/core';\nimport {\n\tnormalizePakkStandaloneOptions,\n\ttype PakkStandaloneOptions,\n} from './pakk-standalone-runner.function.options.js';\n\n/**\n * The standalone runner for pakk to be used on it's own instead of together\n * with a build tool\n */\nexport const pakkStandaloneRunner = async (\n\trawOptions?: PakkOptions & PakkStandaloneOptions,\n): Promise<void> => {\n\tconst pakkStandaloneOptions = normalizePakkStandaloneOptions(rawOptions);\n\tconst pakk = await Pakk.withContext(pakkStandaloneOptions, rawOptions);\n\n\tawait pakk.examinePackage();\n\n\tawait asyncFilterMap(pakk.getTargetPackageJsonKinds(), async (packageJsonTarget) => {\n\t\tconst { updatedPackageJson, path } = await pakk.createUpdatedPackageJson(packageJsonTarget);\n\n\t\tawait writeJson(updatedPackageJson, path, pakk.options);\n\t});\n};\n"],"names":[],"mappings":";;;AAaa,MAAA,iCAAiC,CAC7C,YACqC;AAC9B,SAAA;AAAA,IACN,SAAS,SAAS,WAAW;AAAA,EAAA;AAE/B;ACNa,MAAA,uBAAuB,OACnC,eACmB;AACb,QAAA,wBAAwB,+BAA+B,UAAU;AACvE,QAAM,OAAO,MAAM,KAAK,YAAY,uBAAuB,UAAU;AAErE,QAAM,KAAK;AAEX,QAAM,eAAe,KAAK,0BAA0B,GAAG,OAAO,sBAAsB;AACnF,UAAM,EAAE,oBAAoB,SAAS,MAAM,KAAK,yBAAyB,iBAAiB;AAE1F,UAAM,UAAU,oBAAoB,MAAM,KAAK,OAAO;AAAA,EAAA,CACtD;AACF;"}