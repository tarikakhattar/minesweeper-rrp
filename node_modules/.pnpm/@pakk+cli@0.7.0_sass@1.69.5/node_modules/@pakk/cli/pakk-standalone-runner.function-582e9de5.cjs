"use strict";
const common = require("@alexaegis/common");
const fs = require("@alexaegis/fs");
const core = require("@pakk/core");
const normalizePakkStandaloneOptions = (options) => {
  return {
    formats: options?.formats ?? core.DEFAULT_EXPORT_FORMATS
  };
};
const pakkStandaloneRunner = async (rawOptions) => {
  const pakkStandaloneOptions = normalizePakkStandaloneOptions(rawOptions);
  const pakk = await core.Pakk.withContext(pakkStandaloneOptions, rawOptions);
  await pakk.examinePackage();
  await common.asyncFilterMap(pakk.getTargetPackageJsonKinds(), async (packageJsonTarget) => {
    const { updatedPackageJson, path } = await pakk.createUpdatedPackageJson(packageJsonTarget);
    await fs.writeJson(updatedPackageJson, path, pakk.options);
  });
};
exports.pakkStandaloneRunner = pakkStandaloneRunner;
//# sourceMappingURL=pakk-standalone-runner.function-582e9de5.cjs.map
